<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>Kết quả Simplex</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 2rem; }
        h1, h2, h3 { color: #2c3e50; }
        pre { background: #f4f4f4; padding: .75rem 1rem; border-radius: 6px; }
        .step { margin-bottom: 1.5rem; }
        .label { font-weight: 600; }
        .back-button { 
            background: #3498db; 
            color: white; 
            padding: 0.5rem 1rem; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
            margin-bottom: 1rem;
            text-decoration: none;
            display: inline-block;
        }
        .back-button:hover { background: #2980b9; }
    </style>
</head>
<body>
    <a href="javascript:history.back()" class="back-button">← BACK</a>
    
    <h1>Kết quả bài toán đơn hình</h1>

    <!-- Trạng thái & z*  -->
    <p class="label">Trạng thái:</p>
    <p>{{ result.status }}</p>

    {% if result.z is not none %}
        <p class="label">Giá trị tối ưu&nbsp;<em>z*</em>:</p>
        <p>{{ "%.4f"|format(result.z) }}</p>
    {% endif %}

    <!-- Giải pháp -->
    {% if result.solution %}
        <h2>Giải pháp tối ưu</h2>
        <ul>
            {% for var, val in result.solution.items() %}
                <li>{{ var }} = {{ "%.4f"|format(val) }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <!-- Hình vẽ plot -->
    {% if plot_data %}
        <h2>Hình ảnh hóa (Bài toán 2 biến)</h2>
        <img src="data:image/png;base64,{{ plot_data }}" alt="Feasible Region" />
    {% endif %}

    <!-- Các bước -->
    <h2>Chi tiết các bước</h2>
    {% for title, tableau in result.steps.items() %}
        <div class="step">
            <h3>{{ title }}</h3>
            <pre>
{% for var, expr in tableau.items() if var != 'z' %}{{ "%-4s = %s"|format(var, expr) }}
{% endfor %}{{ "%-4s = %s"|format('z', tableau['z']) }}
            </pre>
        </div>
    {% endfor %}

</body>
</html>
